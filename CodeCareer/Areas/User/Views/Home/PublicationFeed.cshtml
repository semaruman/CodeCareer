@using CodeCareer.Areas.User.Services.Interfaces
@using CodeCareer.Areas.User.Services.Implementations.JsonServices

@inject IPublicationService PublicationService

@model UserModel

@{
	var publications = PublicationService.GetPublicationModels();
	publications.Reverse();
}

<div>
	<h2>Лента публикаций</h2>

	@foreach (var publication in publications)
	{
		@await Component.InvokeAsync("Publication", new {publicationP = publication})
		<br />
		@if (!Model.SubscriptionsEmails.Contains(publication.User.Email))
		{
			<button>Подписаться</button>
		}
		else
		{
			<button>Отписаться</button>
		}

		<button>Повысить рейтинг</button>
	}
</div>